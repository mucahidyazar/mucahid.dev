<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Testing React Apps (with Jest and React Testing Library)</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle],
      section[data-field=description] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">Testing React Apps (with Jest and React Testing Library)</h1>
</header>
<section data-field="subtitle" class="p-summary">
Geçen yazımda sizlere Jesti ve Javascript uygulamalarımızı nasıl test edeceğimi temel yapılarıyla anlatmıştım. Bu sefer ise sizlere React…
</section>
<section data-field="body" class="e-content">
<section name="96d4" class="section section--body section--first section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="2b3f" id="2b3f" class="graf graf--h3 graf--leading graf--title"><strong class="markup--strong markup--h3-strong">Testing React Apps (with Jest and React Testing Library)</strong></h3><p name="2d5b" id="2d5b" class="graf graf--p graf-after--h3">Geçen yazımda sizlere Jesti ve Javascript uygulamalarımızı nasıl test edeceğimi temel yapılarıyla anlatmıştım. Bu sefer ise sizlere React uygulamalarımızı Jesti ve <a href="https://testing-library.com/docs/react-testing-library/cheatsheet/" data-href="https://testing-library.com/docs/react-testing-library/cheatsheet/" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">react-testing-library</a>’ı kullanarak React komponentlerimizi, adım adım nasıl test edeceğimizi göstereceğim.</p><figure name="5008" id="5008" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="0*c0SgJlFVPdO1h6ut.png" data-width="1400" data-height="787" data-is-featured="true" src="https://cdn-images-1.medium.com/max/800/0*c0SgJlFVPdO1h6ut.png"></figure><h3 name="1f44" id="1f44" class="graf graf--h3 graf-after--figure">React Testing Library</h3><ul class="postList"><li name="54ec" id="54ec" class="graf graf--li graf-after--h3">React Testing Library, React komponentlerimizi test edebilmemiz için geliştirilmiş en hafif, en güzel test yapısıdır React uygulamalarımız için.</li><li name="a0db" id="a0db" class="graf graf--li graf-after--li">Daha iyi test pratikleriyle şimdilerde Enzyme kullanımını bitirip yerini almaktadır.</li><li name="c6b5" id="c6b5" class="graf graf--li graf-after--li">Ve bizlere react-dom ve react-dom/test-utils ile çok güzel hazır utilty fonsiyonları sağlamaktadır.</li><li name="5c8a" id="5c8a" class="graf graf--li graf-after--li">create-react-app ile otomatik olarak hali hazırda <a href="https://testing-library.com/docs/react-testing-library/cheatsheet/" data-href="https://testing-library.com/docs/react-testing-library/cheatsheet/" class="markup--anchor markup--li-anchor" rel="noopener" target="_blank">react-testing-library</a> birlikte gelmektedir.</li><li name="3495" id="3495" class="graf graf--li graf-after--li">Kent C. Dodds tarafından geliştirildi. Kesinlikle bloglarını takip edin ve makalelerini okuyun.</li></ul><h3 name="f72d" id="f72d" class="graf graf--h3 graf-after--li"><strong class="markup--strong markup--h3-strong">Kurulum</strong></h3><ul class="postList"><li name="f561" id="f561" class="graf graf--li graf-after--h3">create-react-app ile uygulamanızı kurduysanız ekstra yapmanız veya yüklemeniz gereken hiçbir şey yok direkt test işlemlerine başlayabilirsiniz.</li><li name="f167" id="f167" class="graf graf--li graf-after--li">create-react-app olmadan bir boilerplate veya başka bir şekilde uygulamanızı oluşturduysanız tek yapmanız gereken aşağıda ki kod ile <a href="https://testing-library.com/docs/react-testing-library/cheatsheet/" data-href="https://testing-library.com/docs/react-testing-library/cheatsheet/" class="markup--anchor markup--li-anchor" rel="noopener" target="_blank">react-testing-library</a>’ı uygulamamıza yüklemek.</li></ul><blockquote name="a2d7" id="a2d7" class="graf graf--blockquote graf-after--li"><strong class="markup--strong markup--blockquote-strong">npm install — save-dev </strong><a href="http://twitter.com/testing" data-href="http://twitter.com/testing" class="markup--anchor markup--blockquote-anchor" title="Twitter profile for @testing" rel="noopener" target="_blank"><strong class="markup--strong markup--blockquote-strong">@testing</strong></a><strong class="markup--strong markup--blockquote-strong">-library/react</strong></blockquote><h3 name="0f29" id="0f29" class="graf graf--h3 graf-after--blockquote">START</h3><ul class="postList"><li name="1ea2" id="1ea2" class="graf graf--li graf-after--h3">Bir proje oluşturuyorum.</li></ul><blockquote name="a8e2" id="a8e2" class="graf graf--blockquote graf-after--li"><strong class="markup--strong markup--blockquote-strong">npx create-react-app component-testing</strong></blockquote><h3 name="c44f" id="c44f" class="graf graf--h3 graf-after--blockquote">Counter.js</h3><ul class="postList"><li name="043b" id="043b" class="graf graf--li graf-after--h3">Daha sonra src altında “components” adında bir klasör oluşturuyorum. Ve aşağıdaki kodlarla Counter.js adında bir component dosyası oluşturuyorum.</li></ul><figure name="b4b6" id="b4b6" class="graf graf--figure graf--iframe graf-after--li"><script src="https://gist.github.com/mucahidyazar/8d8ba833b49f910dd49756266bea3628.js"></script></figure><ul class="postList"><li name="29de" id="29de" class="graf graf--li graf-after--figure">Daha sonra npm test veya yarn test diyerek testi başlatacağız.</li></ul><blockquote name="fa9d" id="fa9d" class="graf graf--blockquote graf-after--li"><strong class="markup--strong markup--blockquote-strong">npm test / yarn test</strong></blockquote><h3 name="a37a" id="a37a" class="graf graf--h3 graf-after--blockquote">Testing of <strong class="markup--strong markup--h3-strong">&lt;</strong>Counter <strong class="markup--strong markup--h3-strong">/&gt;</strong> Component</h3><ul class="postList"><li name="1f88" id="1f88" class="graf graf--li graf-after--h3">Counter.js dosyamızın yanında Counter.test.js veya Counter.spec.js adında bir dosya oluşturuyoruz. Bu dosya içinde component testlerini uygulayacağız.</li></ul><figure name="859d" id="859d" class="graf graf--figure graf--iframe graf-after--li"><script src="https://gist.github.com/mucahidyazar/2727148bb5f6db3aa0768f0d0d5a20c4.js"></script></figure><blockquote name="cf64" id="cf64" class="graf graf--blockquote graf-after--figure"><strong class="markup--strong markup--blockquote-strong">render</strong></blockquote><ul class="postList"><li name="8f65" id="8f65" class="graf graf--li graf-after--blockquote">render ile componentlerimizi sanki bir DOM üzerinde render eder gibi render çıktıları alabilir ve bu render çıktısına göre test işlemlerimizi yapabiliriz.</li><li name="277f" id="277f" class="graf graf--li graf--startsWithDoubleQuote graf-after--li">“@testing-library/react”’den render methodunu projemize dahil ediyoruz.</li><li name="830b" id="830b" class="graf graf--li graf-after--li">wrapper adında bir değişken oluşturup render methodunu kullanarak ve içine argument olarak test dosyamıza import ile dahil ettiğimiz Counter componentini yukarıda ki gibi(<strong class="markup--strong markup--li-strong">&lt;Counter /&gt;</strong>) veriyoruz.</li></ul><blockquote name="c686" id="c686" class="graf graf--blockquote graf-after--li"><strong class="markup--strong markup--blockquote-strong">cleanup</strong></blockquote><ul class="postList"><li name="7897" id="7897" class="graf graf--li graf-after--blockquote">DOM’u temizlemek için kullanılır.</li><li name="2171" id="2171" class="graf graf--li graf-after--li">cleanup metodu, afterEach ile kullanıldığında bize her seferinde DOMu temizleyip getirmesini sağlar. Yani cleanup DOM’u temizler, afterEach her test işlemin de yapılmasını sağlar. AafterEach sadece bulunduğu dosyada ki her test işlemini kapsar. Böylece testlerimiz her seferinde temiz bir DOM ile başlar ve daha güvenli testler yapabiliriz.</li></ul><h3 name="f967" id="f967" class="graf graf--h3 graf-after--li">NewMovie.js</h3><figure name="f1cf" id="f1cf" class="graf graf--figure graf--iframe graf-after--h3"><script src="https://gist.github.com/mucahidyazar/26402423316b685fbfa09270bc6d152f.js"></script></figure><h3 name="e3c0" id="e3c0" class="graf graf--h3 graf-after--figure">NewMovie.test.js</h3><figure name="de46" id="de46" class="graf graf--figure graf--iframe graf-after--h3"><script src="https://gist.github.com/mucahidyazar/5e2e6fc8cf2902d596c52fa41c2f2f66.js"></script></figure><blockquote name="eb7f" id="eb7f" class="graf graf--blockquote graf-after--figure"><strong class="markup--strong markup--blockquote-strong">debug</strong></blockquote><ul class="postList"><li name="6627" id="6627" class="graf graf--li graf-after--blockquote">Ve daha sonra wrapper değişkenine render’ın döndüğü debug ile aşağıda ki gibi bir çıktıyı terminalimizde test çalıştığı zaman görebiliriz.</li></ul><figure name="d64d" id="d64d" class="graf graf--figure graf-after--li"><img class="graf-image" data-image-id="1*h5GL2Gkvf0-s4EqJtLvJ1g.png" data-width="459" data-height="298" src="https://cdn-images-1.medium.com/max/800/1*h5GL2Gkvf0-s4EqJtLvJ1g.png"></figure><blockquote name="37fe" id="37fe" class="graf graf--blockquote graf-after--figure"><strong class="markup--strong markup--blockquote-strong">Catch Elements</strong></blockquote><ul class="postList"><li name="e0bd" id="e0bd" class="graf graf--li graf-after--blockquote">Elementleri ise DOM’dan yakalar gibi aşağıda ki gibi yakalayabilir ve test edebiliriz ama bu yöntemi seçmeyin sadece render’ın DOM’a ne kadar benzediğini size göstermek için bunu gösteriyorum.</li></ul><figure name="8d11" id="8d11" class="graf graf--figure graf--iframe graf-after--li"><script src="https://gist.github.com/mucahidyazar/26bb515045cb8a37971868fa3383b989.js"></script></figure><blockquote name="8409" id="8409" class="graf graf--blockquote graf-after--figure"><strong class="markup--strong markup--blockquote-strong">screen</strong></blockquote><ul class="postList"><li name="d80b" id="d80b" class="graf graf--li graf-after--blockquote"><strong class="markup--strong markup--li-strong">screen </strong>ile aslında browserda aşağıda ki resimde ki gördüğünüz DOM’da ki element özelliklerine göre seçimlerinizi yapabilirsiniz. Test işlemlerinde elementleri seçmek screenin bize verdiği methodları kullanarak element seçimlerini yapınız.</li></ul><figure name="769d" id="769d" class="graf graf--figure graf-after--li"><img class="graf-image" data-image-id="1*JH5sA1A4KKqLvAJyssCfXg.png" data-width="567" data-height="349" src="https://cdn-images-1.medium.com/max/800/1*JH5sA1A4KKqLvAJyssCfXg.png"></figure><h3 name="cb2d" id="cb2d" class="graf graf--h3 graf-after--figure">getBy… vs queryBy…</h3><ul class="postList"><li name="c61b" id="c61b" class="graf graf--li graf-after--h3">Element seçim methodlarına geçmeden önce getBy… ve queryBy… methodları ile alakalı şunu belirtmek istiyorum.</li><li name="f998" id="f998" class="graf graf--li graf-after--li">Bu iki method aslında ne kadar benzer işleri yapıyor gözüksede aralarında büyük bir fark vardır. Bu fark getBy… methodları ile alacağımız yani seçeceğimiz eleman kesinlikle orada yani DOMda olmalıdır, olmazsa hata verir, queryBy… methodları ile ise olmazsa sıkıntı yok ve test hata vermez, olursa da seçer ve devam eder gibi düşünebilirsiniz. queryBy… ve getBy… ile olan tüm methodlarda her şeyde bu böyledir.</li></ul><blockquote name="017b" id="017b" class="graf graf--blockquote graf-after--li"><strong class="markup--strong markup--blockquote-strong">getByRole</strong></blockquote><ul class="postList"><li name="de0e" id="de0e" class="graf graf--li graf-after--blockquote">getByRole metodu ile aslında yukarıda gördüğünüz DOM’daki element özelliklerine göre seçim yaparız.</li><li name="6a38" id="6a38" class="graf graf--li graf-after--li">getByRole ilk argument olarak elementin ne olduğunu alır, (a, button, aside vs…), ikinci argument olarak ise bir obje alır. Bu objede aşağıda verdiğimiz name’de ise text eşleşmesi içeren string alır. Yani Butonda “Bana tıkla” yazıyorsa DOM üzerinde, name olarak da “Bana tıkla” veya bir regex tanımlayarak name eşleşmesi ile element seçebilirsiniz.</li><li name="8ba0" id="8ba0" class="graf graf--li graf-after--li">Aşağıda ki örnekte içerisinde decrement yazan bir butonu seçiyoruz.</li></ul><blockquote name="a825" id="a825" class="graf graf--blockquote graf-after--li"><strong class="markup--strong markup--blockquote-strong">getByText</strong></blockquote><ul class="postList"><li name="9edd" id="9edd" class="graf graf--li graf-after--blockquote">getByText ile text eşleşmesine göre element seçimi yapabiliriz.</li><li name="0bed" id="0bed" class="graf graf--li graf-after--li">İçerisine argument olarak aradığımız elementin içerisinde olan stringi veririz.</li><li name="2c3c" id="2c3c" class="graf graf--li graf-after--li">Aşadğıda ki örnekte “current count” olan bir elementi seçmek istemişiz.</li></ul><figure name="0df2" id="0df2" class="graf graf--figure graf--iframe graf-after--li"><script src="https://gist.github.com/mucahidyazar/2703f3fb1a01a218a8b2f951a25c7fd4.js"></script></figure><blockquote name="2330" id="2330" class="graf graf--blockquote graf-after--figure"><strong class="markup--strong markup--blockquote-strong">getByTestId</strong></blockquote><ul class="postList"><li name="98ff" id="98ff" class="graf graf--li graf-after--blockquote">Veya dilersek elemente verdiğimiz bir data-testid attributesine görede seçme işlemini yapabiliriz. Yukarıda ki Counter componentımız da göreceğiniz üzere counter-button adında bir data-testid tanımlamışız. Onu seçmek için tek yapmamız gereken getByTestId’ye, data-testid attributesine tanımladığımız değeri argument olarak vermektir. Tıpkı aşağıda ki örnekte ki gibi.</li></ul><figure name="db2a" id="db2a" class="graf graf--figure graf--iframe graf-after--li"><script src="https://gist.github.com/mucahidyazar/dd0a460763a72f999a5623eb2eb3f2a2.js"></script></figure><blockquote name="ff66" id="ff66" class="graf graf--blockquote graf-after--figure"><strong class="markup--strong markup--blockquote-strong">Destructring Wrapper</strong></blockquote><ul class="postList"><li name="f32a" id="f32a" class="graf graf--li graf-after--blockquote">Veya dilersek bunların(getbyText, getByTestId, getByRole) hepsini aşağıda ki gibi wrapper’dan object destructring yöntemi ile de elde edebiliriz.</li></ul><figure name="1dfb" id="1dfb" class="graf graf--figure graf--iframe graf-after--li"><script src="https://gist.github.com/mucahidyazar/cfd8ade2cb94ca0c4ce7cfac7ef642c7.js"></script></figure><blockquote name="e345" id="e345" class="graf graf--blockquote graf-after--figure"><strong class="markup--strong markup--blockquote-strong">.textContent</strong></blockquote><ul class="postList"><li name="0e31" id="0e31" class="graf graf--li graf-after--blockquote">Bu property ile de seçtiğimiz elementlerin içerdiği textleri alabiliriz. Daha sornada aşağıda ki gibi jest’in expect ve toBe’si ile bunları kontrol ve test edebiliriz.</li><li name="a302" id="a302" class="graf graf--li graf-after--li">Aşağıda data-testid attributesi counter-button olan elementi seçip daha sonrada textContent’ini almışız ve expect yapmışız. Ve toBe ile bu değerin 0 olmalı olduğunu belirtmişiz.</li></ul><figure name="9ede" id="9ede" class="graf graf--figure graf--iframe graf-after--li"><script src="https://gist.github.com/mucahidyazar/5c843672666b09341ee59d2828335b4c.js"></script></figure><blockquote name="f44a" id="f44a" class="graf graf--blockquote graf-after--figure"><strong class="markup--strong markup--blockquote-strong">.toHaveTextContent</strong></blockquote><ul class="postList"><li name="b3da" id="b3da" class="graf graf--li graf-after--blockquote">Tabi yukarıda ki gibi .textContent ve .toBe kullanacağınıza aşağıda ki gibi toHaveTextContent ile bu işlemi tek adım da yapabilirsiniz.</li></ul><figure name="65df" id="65df" class="graf graf--figure graf--iframe graf-after--li"><script src="https://gist.github.com/mucahidyazar/9402c8c8431a8eab0405e67435bd10d1.js"></script></figure><blockquote name="191b" id="191b" class="graf graf--blockquote graf-after--figure"><strong class="markup--strong markup--blockquote-strong">Which Query Should I Use? Hangi Query Seçicisini Kullanmalıyız?</strong></blockquote><ul class="postList"><li name="2ad7" id="2ad7" class="graf graf--li graf-after--blockquote">Peki siz de yukarı daki soruyu soruyorsanız kesin bir cevabı yok bunu kullanacağınız yere göre kendinizin bulması gerekiyor. Ama <strong class="markup--strong markup--li-strong">screen </strong>ile yukarıda ki gibi seçme işlemlerinin herhangi birisini yapabilirsiniz. Ve tabi ki <a href="https://testing-library.com/docs/react-testing-library/cheatsheet/" data-href="https://testing-library.com/docs/react-testing-library/cheatsheet/" class="markup--anchor markup--li-anchor" rel="noopener" target="_blank">react-testing-library</a>’ın documentationından yardım almayı kesinlikle unutmayın.</li></ul><p name="73b4" id="73b4" class="graf graf--p graf-after--li"><a href="https://testing-library.com/docs/queries/about#priority" data-href="https://testing-library.com/docs/queries/about#priority" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">https://testing-library.com/docs/queries/about#priority</a></p><p name="85a3" id="85a3" class="graf graf--p graf-after--p"><a href="https://testing-library.com/docs/react-testing-library/cheatsheet/" data-href="https://testing-library.com/docs/react-testing-library/cheatsheet/" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">https://testing-library.com/docs/react-testing-library/cheatsheet/</a></p><ul class="postList"><li name="35d5" id="35d5" class="graf graf--li graf-after--p">Kent C. Dodds abimiz bu seçme işlemi için bize birde chrome extension geliştirmiş. İsterseniz bu eklentiye bir göz atın belki işinize yarar. Bu eklenti seçtiğiniz element için en iyi seçici hangisi size onu gösteriyor.</li></ul><div name="d1a7" id="d1a7" class="graf graf--mixtapeEmbed graf-after--li"><a href="https://testing-playground.com/" data-href="https://testing-playground.com/" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://testing-playground.com/"><strong class="markup--strong markup--mixtapeEmbed-strong">Testing Playground</strong><br><em class="markup--em markup--mixtapeEmbed-em">Simple and complete DOM testing playground that encourage good testing practices.</em>testing-playground.com</a><a href="https://testing-playground.com/" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="70c08c6f1780045f955315fc6edb833c" data-thumbnail-img-id="0*g_L7U6SrFLfNfKvO" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/0*g_L7U6SrFLfNfKvO);"></a></div><h3 name="a452" id="a452" class="graf graf--h3 graf-after--mixtapeEmbed">EVENTS</h3><blockquote name="cb9e" id="cb9e" class="graf graf--blockquote graf-after--h3"><a href="https://testing-library.com/docs/dom-testing-library/api-events" data-href="https://testing-library.com/docs/dom-testing-library/api-events" class="markup--anchor markup--blockquote-anchor" rel="noopener" target="_blank"><strong class="markup--strong markup--blockquote-strong">.fireEvent</strong></a><strong class="markup--strong markup--blockquote-strong"> &amp; .click</strong></blockquote><ul class="postList"><li name="14bb" id="14bb" class="graf graf--li graf-after--blockquote">En önemli bir diğer konu ise events kısmı. Yani onClick, onChange gibi eventlerimizi yaptığımız kısımlar. Bunun için “fireEvent” methodunu @testing-library/react’den aşağıda ki gibi test dosyamıza dahil ediyoruz.</li><li name="9a86" id="9a86" class="graf graf--li graf-after--li">fireEvent ile değişik onlarca methodu kullanarak event işlemlerimizi gerçekleştiririz. Aşağıda bu eventlere örnek olsun diye ekran görüntüsü ekliyorum. Detaylı event kullanımı için <a href="https://testing-library.com/docs/dom-testing-library/api-events" data-href="https://testing-library.com/docs/dom-testing-library/api-events" class="markup--anchor markup--li-anchor" rel="noopener" target="_blank"><strong class="markup--strong markup--li-strong">Documentation</strong></a>’a bakmayı unutmayın.</li></ul><figure name="e03f" id="e03f" class="graf graf--figure graf-after--li"><img class="graf-image" data-image-id="1*MY0rjuaD-MsXwfMOf4gOag.png" data-width="378" data-height="195" src="https://cdn-images-1.medium.com/max/800/1*MY0rjuaD-MsXwfMOf4gOag.png"></figure><blockquote name="1f6e" id="1f6e" class="graf graf--blockquote graf-after--figure"><a href="https://testing-library.com/docs/ecosystem-user-event/" data-href="https://testing-library.com/docs/ecosystem-user-event/" class="markup--anchor markup--blockquote-anchor" rel="noopener" target="_blank"><strong class="markup--strong markup--blockquote-strong">userEvent - @testing-library/user-event</strong></a><strong class="markup--strong markup--blockquote-strong"> &amp; .click</strong></blockquote><ul class="postList"><li name="4bab" id="4bab" class="graf graf--li graf-after--blockquote">userEvent ise @testing-library için tamamlayıcı bir kütüphanedir.</li><li name="6fb3" id="6fb3" class="graf graf--li graf-after--li">Bize fireEvent’e göre daha gelişmiş bir browser similasyonu sağlar.</li><li name="035b" id="035b" class="graf graf--li graf-after--li">Documentation’a bakmayı unutmayın.</li></ul><figure name="fc79" id="fc79" class="graf graf--figure graf-after--li"><img class="graf-image" data-image-id="1*v22GAk5w1eiv0AG3BkCMww.png" data-width="378" data-height="195" src="https://cdn-images-1.medium.com/max/800/1*v22GAk5w1eiv0AG3BkCMww.png"></figure><ul class="postList"><li name="a555" id="a555" class="graf graf--li graf-after--figure">Kullanım olarak aşağıda ki örnekte göreceğiniz üzere değişen çok fazla şey yok aslında kullanımı oldukça benzer.</li><li name="cc92" id="cc92" class="graf graf--li graf-after--li">Tabi ilk önce @testing-library/react’dan userEvent veya belirlediğiniz bir isim ile import etmeyi unutmuyoruz aşağıda ki gibi.</li></ul><figure name="a1a5" id="a1a5" class="graf graf--figure graf--iframe graf-after--li"><script src="https://gist.github.com/mucahidyazar/5afdeb9c53164224192671f561a325eb.js"></script></figure><h3 name="ee48" id="ee48" class="graf graf--h3 graf-after--figure">Login.js</h3><ul class="postList"><li name="6354" id="6354" class="graf graf--li graf-after--h3">Components kısmında aşağıda ki gibi Login.js component’i oluşturuyoruz.</li></ul><figure name="ba8c" id="ba8c" class="graf graf--figure graf--iframe graf-after--li"><script src="https://gist.github.com/mucahidyazar/efddd8c48fcd9578465c21a6a9d0c7c4.js"></script></figure><h3 name="b26d" id="b26d" class="graf graf--h3 graf-after--figure">Testing of &lt;Login/&gt; Component</h3><ul class="postList"><li name="e97d" id="e97d" class="graf graf--li graf-after--h3">Bazende inputlarımızı test etmemiz gerekebilir bunun içinde .type methodu var bizim için fireEvent methodu veya userEvent library’si içinde.</li></ul><blockquote name="7e1c" id="7e1c" class="graf graf--blockquote graf-after--li"><strong class="markup--strong markup--blockquote-strong">.type<br>.toEqual</strong></blockquote><ul class="postList"><li name="df6c" id="df6c" class="graf graf--li graf-after--blockquote">type eventi 2 argument alır. 1.si seçilen element, (type edileceği için input olmalı), 2. si ise type edilecek değer olmalı “mucahidyazar” veya const ile aşağıda ki gibi bir değişkene atanmış string olabilir.</li><li name="5bba" id="5bba" class="graf graf--li graf-after--li">Aşağıda login formumuzu render ettikten sonra, login formumuzda ki username ve password alanına girilecek değerleri degişkene tanımlayarak tutuyoruz.</li><li name="b3d1" id="b3d1" class="graf graf--li graf-after--li">Daha sonra screen ile username ve password input alanini label’in inputlarina göre seçiyoruz. Ve bunlara userEvent.type yapıp, aşağıda ki gibi oluşturduğumuz bu değişkenleri input’a type ettiriyoruz yani yazdırıyoruz.</li><li name="4ef4" id="4ef4" class="graf graf--li graf-after--li">Daha sonra getByRole ile butonun rolüne göre seçiyoruz ve userEvent.click ile formumuzu submit ediyoruz.</li><li name="5f12" id="5f12" class="graf graf--li graf-after--li">Submit olunca tetiklenecek handleSubmit fonksiyonunu yukarıda oluşturup Login componentına props olarak veriyoruz. Ve bu fonksiyonun gelen datayı submitedData ya eşitlemesini istiyoruz. Böylelikle submitedData’yı expect ile aliyoruz ve toEqual ile Login componentından gelen data objesinin username ve password gönderdiğine emin oluyoruz.</li></ul><figure name="2647" id="2647" class="graf graf--figure graf--iframe graf-after--li"><script src="https://gist.github.com/mucahidyazar/839c46bb804dcad9965c636ee25e8bfa.js"></script></figure><ul class="postList"><li name="8201" id="8201" class="graf graf--li graf-after--figure">Veya yukarıda ki aynı işleri jest.fn() yani mock functionlarla aşağıda ki gibi çok daha basit ve test edilebilir bir şekilde de yapabiliriz.</li><li name="5ee2" id="5ee2" class="graf graf--li graf-after--li">Oluşturduğumuz mock functionunun username ve password ile kullanıldığını, <strong class="markup--strong markup--li-strong">toHaveBeenCalledWith</strong> ile anlayabiliyoruz.</li><li name="7745" id="7745" class="graf graf--li graf-after--li">Ve <strong class="markup--strong markup--li-strong">toHaveBeenCalledTimes</strong> ile submit fonksiyonunun bir kere çalıştırıldığından emin oluyoruz.</li></ul><figure name="62a2" id="62a2" class="graf graf--figure graf--iframe graf-after--li"><script src="https://gist.github.com/mucahidyazar/0ee0173a38bc6cce5fe4e08eb8cb47d7.js"></script></figure><blockquote name="1649" id="1649" class="graf graf--blockquote graf-after--figure"><strong class="markup--strong markup--blockquote-strong">Create Fake Forms</strong></blockquote><ul class="postList"><li name="80e3" id="80e3" class="graf graf--li graf-after--blockquote">Bazen de fake formlar oluşturmayı isteyebiliriz, o zaman yapacağımız 2 yöntem var.</li></ul><ol class="postList"><li name="ba22" id="ba22" class="graf graf--li graf-after--li">Ya faker modulu ile aşağıda ki gibi fake username ve passwordları bir utility function ile oluşturacağız ve bu fonksiyonu kullanarak username ve password alacağız,</li></ol><figure name="feb1" id="feb1" class="graf graf--figure graf--iframe graf-after--li"><script src="https://gist.github.com/mucahidyazar/0f89d2cb5b815af8097ead0b8a06b7ef.js"></script></figure><p name="4d09" id="4d09" class="graf graf--p graf-after--figure">2. Yada @jackfranklin/test-data-bot modülünden gelen fake metodu ile oluşturacağız ve aynı faker modülü ile yaptığımız gibi çağırıp kullanacağız.</p><figure name="6a46" id="6a46" class="graf graf--figure graf--iframe graf-after--p"><script src="https://gist.github.com/mucahidyazar/34e25ffe431ca1ba206777814bab23dc.js"></script></figure><ul class="postList"><li name="bfda" id="bfda" class="graf graf--li graf-after--figure">Ve aşağıda oluşturduğumu bu fake form functionları ile fake formlar oluşturup daha sonra object destructring ile field’ları yakalayabilir ve kullanabiliriz.</li></ul><figure name="ddcc" id="ddcc" class="graf graf--figure graf--iframe graf-after--li"><script src="https://gist.github.com/mucahidyazar/9743156b836da786a872f245f862aefe.js"></script></figure><h3 name="e25e" id="e25e" class="graf graf--h3 graf-after--figure">Mocking Http Request</h3><ul class="postList"><li name="a67e" id="a67e" class="graf graf--li graf-after--h3">Buda testlerde ki önemli konulardan birisi aslında. Mock olarak http Requestleri oluşturmak ve kullanmamız gereken zamanlar da olacak o zamanda sizde burada anlatacağım örnekte ki gibi kendi yapılarınızı kurmanız gerekecektir.</li></ul><p name="433d" id="433d" class="graf graf--p graf-after--li">- İlk önce <strong class="markup--strong markup--p-strong">msv</strong> library’sinden rest’i import ediyoruz.<br>- Daha sonra <strong class="markup--strong markup--p-strong">msw/node</strong>’dan setupserver’ı import ediyoruz.<br>- <strong class="markup--strong markup--p-strong">setupServer</strong> ile fake sanal server kurup ve içinde de asağıda ki gibi <strong class="markup--strong markup--p-strong">rest</strong> ile fake request istekleri gönderdiğimiz url stringine göre return olarak fake jsonlar döneceğiz. Daha sonra aşağıda ki gibi bir değişkene atayarak kullanıyoruz. İlk argument’e işlemin yapılacağı url’i veriyoruz, ikinci argument’e ise async bir işlem yapan fonksiyonumuzu tanımlıyoruz. Username veya password yoksa status 400, ve error message döndürüyoruz. Eğer username ve password varsa da success ve return olarak da sadece username dönüyoruz.<br>- Ve daha sonra serverımızı beforeAll içinde tüm testlerden önce başlatıyoruz ve en sonunda afterAll içinde tüm testlerden sonra kapatılmasını sağlıyoruz ki server bellekte yer kaplamasın.<br>- Ve en son submit islemini yaptiktan sonrada DOM’dan, <strong class="markup--strong markup--p-strong">react-testing-library’den</strong> aldigimiz <strong class="markup--strong markup--p-strong">waitForElementToBeRemoved</strong> metodu ile loading yazan elementin yok olmasini beklemesini soyluyoruz.<br>- Ve loading yok olduktan sonra rest den donen username nin dom’da bir elemente yazildigini expect ile control ediyoruz.</p><figure name="29a7" id="29a7" class="graf graf--figure graf--iframe graf-after--p"><script src="https://gist.github.com/mucahidyazar/974715e59a041c11d20563d076966278.js"></script></figure><ul class="postList"><li name="ba7c" id="ba7c" class="graf graf--li graf-after--figure">Başka bir test oluşturup password alanına birşey girilmediğinde ki error’u yakalamak içinse tek yapmamız gereken aşağıda ki gibi password’a birşey type etmemek ve loading’den sonra gözükecek alert butonunu screenle yakalayıp expect ile içinde yazanı kontrol etmektir.</li></ul><figure name="e234" id="e234" class="graf graf--figure graf--iframe graf-after--li"><script src="https://gist.github.com/mucahidyazar/1bdf90070d21a2c5cad33ea710df8878.js"></script></figure><h3 name="0aea" id="0aea" class="graf graf--h3 graf-after--figure"><strong class="markup--strong markup--h3-strong">Inline Snapshots</strong></h3><blockquote name="9426" id="9426" class="graf graf--blockquote graf-after--h3"><strong class="markup--strong markup--blockquote-strong">.toMatchInlineSnapshot</strong></blockquote><ul class="postList"><li name="b3d2" id="b3d2" class="graf graf--li graf-after--blockquote">Inline snapshotlarda ise aşagıda ki gibi ilk testlerde argument olarak bir şey vermeden toMatchInlineSnapshot methodunu çalıştırırız. Aşağıdaki gibi.</li></ul><figure name="a4c8" id="a4c8" class="graf graf--figure graf--iframe graf-after--li"><script src="https://gist.github.com/mucahidyazar/73995042dc250ddfe1add0a78a77a6df.js"></script></figure><ul class="postList"><li name="ce50" id="ce50" class="graf graf--li graf-after--figure">Daha sonra aşağıda ki gibi snapshotlar bu metodumuzun parantez içine gelirler.<br>Daha sonra burada ki kod veya textContent değişirse snapshot hataları alırız ve bunları güncellemek update etmek istersek, terminalde u ya basarak güncelleriz veya dönen contenti veya kodu düzenleriz.</li></ul><figure name="d2c6" id="d2c6" class="graf graf--figure graf--iframe graf-after--li"><script src="https://gist.github.com/mucahidyazar/765efea0fe47eba0fc6c2865df8820d9.js"></script></figure><blockquote name="5e20" id="5e20" class="graf graf--blockquote graf-after--figure"><strong class="markup--strong markup--blockquote-strong">.afterEach<br>.resetHandlers()</strong></blockquote><ul class="postList"><li name="5f25" id="5f25" class="graf graf--li graf-after--blockquote">Daha önce oluşturduğumuz fake servera bazen bazı durumlarda fake error mesajlar dönerek aşağıda ki gibi test etmek isteyebiliriz. Fakat bu istekler eğer bir şey yapmazsak kalıcı olurlar ve testi bozabilirler, bunun için afterEach ile her testten sonra serverın resetHandlers ile server requestlerini sıfırlıyoruz.</li></ul><figure name="38bc" id="38bc" class="graf graf--figure graf--iframe graf-after--li"><script src="https://gist.github.com/mucahidyazar/a01c3b69edffaf89c42c8e4c5e2c869d.js"></script></figure><h3 name="cb07" id="cb07" class="graf graf--h3 graf-after--figure"><strong class="markup--strong markup--h3-strong">MOCK BROWSER APIs and MODULES</strong></h3><ul class="postList"><li name="cbb3" id="cbb3" class="graf graf--li graf-after--h3">Bazen browser API’larına erişip test etmek isteyebiliriz. Örneğin window pencere boyutu gibi, veya GeoLocation API gibi.</li><li name="cd82" id="cd82" class="graf graf--li graf-after--li">Simdi aşağıda browserımızda ki geolocation API’ını nasıl test edeceğimizi göstereceğim.</li></ul><h3 name="2752" id="2752" class="graf graf--h3 graf-after--li">Location.js</h3><ul class="postList"><li name="9f25" id="9f25" class="graf graf--li graf-after--h3">components klasörümüzün içine aşağıdaki Location.js dosyasındaki componentı oluşturuyoruz.</li><li name="36e3" id="36e3" class="graf graf--li graf-after--li">Bu componentimiz browserın geolocation API’ı kullanarak yerimizi bulmak istiyor izin verirsek Lokasyonumuz p elementleri içinde DOM’a yazılıyor. Eğer izin vermezsek error dönüyor ve error mesajı DOM’da dive yazıyor. Eğer sayfa açıldığın da izin isteme penceresine cevap vermezsek, error ve location’da dönmeyeceği için p elementi içinde Loading yazısı gözükecektir.</li></ul><figure name="172c" id="172c" class="graf graf--figure graf--iframe graf-after--li"><script src="https://gist.github.com/mucahidyazar/c8b5d76c020659f9564086c76ec5eb95.js"></script></figure><h3 name="53d4" id="53d4" class="graf graf--h3 graf-after--figure">Testing of &lt;Location /&gt; Component</h3><ul class="postList"><li name="ca33" id="ca33" class="graf graf--li graf-after--h3">BeforeAll ile her testten önce window.navigator.geolocation’daki getCurrentPosition’u method olarak jest function ile mock function olarak belirliyoruz.</li><li name="3422" id="3422" class="graf graf--li graf-after--li">Deferred’in görevi ise location direk olarak yazdırmak yerine location olmadan önce DOM nasıl olacak testi yapıyoruz. Daha sonrada callback’den dönen promise ile locationlari componentımıza ilettikten sonra ki testleri yapabilmemizi sağlıyor.</li><li name="8df1" id="8df1" class="graf graf--li graf-after--li">Promise ve resolve keylerini deferred’den alıp resolve yaparak mock functionu çalıştırır, awaitle promiseyi bekler ve daha sonrada Locationun render edilmiş halini alırız.</li></ul><figure name="6f9b" id="6f9b" class="graf graf--figure graf--iframe graf-after--li"><script src="https://gist.github.com/mucahidyazar/a08b94821a69de9117dfc3cae019706c.js"></script></figure><ul class="postList"><li name="9599" id="9599" class="graf graf--li graf-after--figure">Yada aşağıda ki gibi ject mock function ile aynı işlemi ve testi yapabiliriz.</li></ul><figure name="4222" id="4222" class="graf graf--figure graf--iframe graf-after--li"><script src="https://gist.github.com/mucahidyazar/592422ab46e34998752874e6f7831cab.js"></script></figure><h3 name="aa58" id="aa58" class="graf graf--h3 graf-after--figure">CUSTOM RENDER METHOD</h3><ul class="postList"><li name="ff67" id="ff67" class="graf graf--li graf-after--h3">Bundan önce tüm herşeyi render ederek testlerimizi yapıyorduk, aşağıda ise sadece istediğimiz bir şeyi render ederek sadece render ettiğimiz o component’ı test etmeyi göreceğiz.</li><li name="7d4d" id="7d4d" class="graf graf--li graf-after--li">Şimdi aşağıda burada kullanacağımız tüm Component’ları oluşturacağız. Bunlar ThemeProvider.js, EasyButton.js ve App.js</li></ul><blockquote name="9b63" id="9b63" class="graf graf--blockquote graf-after--li"><strong class="markup--strong markup--blockquote-strong">ThemeProvider.js<br></strong>- Görevi theme state’ini tutmak ve ana uygulamamızın etrafını sararak tema değiştiğindeki görsel değişikliği DOM’a uygulamak.</blockquote><figure name="79ee" id="79ee" class="graf graf--figure graf--iframe graf-after--blockquote"><script src="https://gist.github.com/mucahidyazar/10e3d7844253032e8665630c4900ccc1.js"></script></figure><blockquote name="ba2d" id="ba2d" class="graf graf--blockquote graf-after--figure"><strong class="markup--strong markup--blockquote-strong">EasyButton.js<br></strong>Görevi ThemeProvide.js’den gelen useTheme custom hooks’u ile, temaya erişmek ve temaya göre kendisine style özellikleri belirlemek.</blockquote><figure name="b78f" id="b78f" class="graf graf--figure graf--iframe graf-after--blockquote"><script src="https://gist.github.com/mucahidyazar/9084b26890b579443164339cf0257b85.js"></script></figure><blockquote name="3d59" id="3d59" class="graf graf--blockquote graf-after--figure"><strong class="markup--strong markup--blockquote-strong">App.js<br></strong>Görevi uygulamada ki componentsların hepsi buradadır. <br>ThemeProvider burada etrafına sarılıdır ana uygulamamızın. <br>ThemeToggler uygulamamızın temasını değiştiren butona sahip componentdir.</blockquote><figure name="f110" id="f110" class="graf graf--figure graf--iframe graf-after--blockquote"><script src="https://gist.github.com/mucahidyazar/2918c9b96fabfc15929d7a8554439b2b.js"></script></figure><ul class="postList"><li name="355a" id="355a" class="graf graf--li graf-after--figure">İlk olarak normalde tüm her şeyi render ederek test yaptığımız şekli buraya bırakıyorum.</li></ul><figure name="7c52" id="7c52" class="graf graf--figure graf--iframe graf-after--li"><script src="https://gist.github.com/mucahidyazar/3334932d2dae7dfd3e6575c51b69b280.js"></script></figure><ul class="postList"><li name="c2cb" id="c2cb" class="graf graf--li graf-after--figure">Burada ise sadece EasyButton’ı render ediyoruz. İlk önce Wrapperımızı yani EasyButton’un içinde olduğu Wrapperı bir degişkene atayarak oluşturuyoruz aşağıda ki gibi.</li><li name="6f4e" id="6f4e" class="graf graf--li graf-after--li">Daha sonra test edeceğimiz rendere vereceğimiz EasyButton gibi elemente, ikinci argument olarak olusturdugumuz Wrapper componentini wrapper keyi olarak aşağıda ki gibi atıyoruz.</li><li name="ec30" id="ec30" class="graf graf--li graf-after--li">Ve kalan test işlemi burada da aynı.</li></ul><figure name="9d8d" id="9d8d" class="graf graf--figure graf--iframe graf-after--li"><script src="https://gist.github.com/mucahidyazar/e68e1e725438777cf2a83df6ceac9292.js"></script></figure><ul class="postList"><li name="1c7a" id="1c7a" class="graf graf--li graf-after--figure">Veya istersek Wrapper yapımızı daha fonksiyonel bir yapıya çevirmek için function olarak tanımlarız ve aşağıda ki gibi çağırarak kullanabiliriz.</li></ul><figure name="e6a9" id="e6a9" class="graf graf--figure graf--iframe graf-after--li"><script src="https://gist.github.com/mucahidyazar/1418d7d69818e968eb01cdea90b095b4.js"></script></figure><ul class="postList"><li name="3bcf" id="3bcf" class="graf graf--li graf-after--figure">Veya render methoduna herhangi bir ayar eklemek istersek …options gibi bir yapı kurarak, renderWithTheme functionumuza göndereceğimiz argumentlerle ayarlarımızı ekleyebiliriz.</li><li name="70d0" id="70d0" class="graf graf--li graf-after--li">Ve return ederiz ki renderi asağıda ki yorum satırlarında ki gibi renderdan dönen diğer özellikleri kullanabilelim.</li></ul><figure name="0089" id="0089" class="graf graf--figure graf--iframe graf-after--li"><script src="https://gist.github.com/mucahidyazar/3e447017fd628888d781c013ace47085.js"></script></figure><h3 name="f789" id="f789" class="graf graf--h3 graf-after--figure">Testing Render Utils</h3><ul class="postList"><li name="7cbf" id="7cbf" class="graf graf--li graf-after--h3">Render için aşağıda ki gibi ayrı bir utils functionumuz olması her zaman için daha iyidir. Kendinize uygun bu şekilde bir render utilsi oluşturun.</li></ul><figure name="9a33" id="9a33" class="graf graf--figure graf--iframe graf-after--li"><script src="https://gist.github.com/mucahidyazar/f59d4c3666cc4f41f6ebbc607e9b18a1.js"></script></figure><ul class="postList"><li name="d924" id="d924" class="graf graf--li graf-after--figure">Daha sonra aşağıda ki gibi kullanabiliriz.</li></ul><figure name="a5ce" id="a5ce" class="graf graf--figure graf--iframe graf-after--li"><script src="https://gist.github.com/mucahidyazar/ffaabae430d09b55222048e0f7d9bb94.js"></script></figure><ul class="postList"><li name="e4e9" id="e4e9" class="graf graf--li graf-after--figure">Diyelim ki test klasöründe ki testutils’i aslında ../../ bu şekilde import etmemiz gerekiyor olabilir. Ve bunu yapmamak için aşağıdaki gibi ayarla src’yi baslangıç dizini olarak yapabilir ve noktalarla geriye çıkmamıza gerek kalmadan dosyalarımızı import edebiliriz. Bunun için jest.config.js dosyamızda aşağıda ki resimdeki gibi ayarlamayı yapmamız gerekmektedir. Detaylar için jest documentationa bakın.</li></ul><figure name="7409" id="7409" class="graf graf--figure graf-after--li"><img class="graf-image" data-image-id="1*5nFfftukjDl1uEjr7CqOtg.png" data-width="680" data-height="207" src="https://cdn-images-1.medium.com/max/800/1*5nFfftukjDl1uEjr7CqOtg.png"></figure><h3 name="4c89" id="4c89" class="graf graf--h3 graf-after--figure">Custom Hook Testing</h3><ul class="postList"><li name="f675" id="f675" class="graf graf--li graf-after--h3">Bazen de aşağıda ki custom hook gibi kendi oluşturduğumuz hooksları test etmek isteyebiliriz. Burada da onu göreceğiz.</li></ul><h3 name="395f" id="395f" class="graf graf--h3 graf-after--li">useCounter.js</h3><ul class="postList"><li name="347b" id="347b" class="graf graf--li graf-after--h3">Aşağıda count ve onu arttırıp, azaltmamıza yarayacak functionalityi dönen bir custom hook oluşturduk.</li></ul><figure name="5476" id="5476" class="graf graf--figure graf--iframe graf-after--li"><script src="https://gist.github.com/mucahidyazar/3a265da06ff80af7fb0279067a848d39.js"></script></figure><ul class="postList"><li name="35b7" id="35b7" class="graf graf--li graf-after--figure">Ve burada da şimdiye kadar öğrendiklerimiz ile test ediyoruz.</li></ul><figure name="459d" id="459d" class="graf graf--figure graf--iframe graf-after--li"><script src="https://gist.github.com/mucahidyazar/fc28bd97b0237f073a962c776e0b0bb7.js"></script></figure><p name="cc3e" id="cc3e" class="graf graf--p graf-after--figure"><strong class="markup--strong markup--p-strong">ACT</strong></p><ul class="postList"><li name="8aaa" id="8aaa" class="graf graf--li graf-after--p">Bazen de test içinde component oluşturabiliriz hooksları denemek için. Component dışında bir degişken belirleyerek component içinde hooks, dışarıda belirlediğimiz o değişkene atarız ve daha sonra o değişkeni test edebiliriz.</li><li name="c857" id="c857" class="graf graf--li graf-after--li">Atadığımız değişkenin çıktısı aşağıda ki gibidir.</li><li name="9dbd" id="9dbd" class="graf graf--li graf-after--li">Bunları tetiklemek içinse react-testing-library’deki <strong class="markup--strong markup--li-strong">act’i</strong> kullanırız.</li></ul><figure name="c9f9" id="c9f9" class="graf graf--figure graf--iframe graf-after--li"><script src="https://gist.github.com/mucahidyazar/a23b5be126e3dfbe009c742890cb74f6.js"></script></figure><ul class="postList"><li name="61a5" id="61a5" class="graf graf--li graf-after--figure">Veya aşağıda ki gibi bir ortak fonksiyon oluşturup, bu şekilde de kullanabiliriz. Ama resulta bu sefer current’dan ulaşıyoruz.</li></ul><figure name="8613" id="8613" class="graf graf--figure graf--iframe graf-after--li"><script src="https://gist.github.com/mucahidyazar/eb940cdc55276e09e06da5da3de02f34.js"></script></figure><h3 name="ae01" id="ae01" class="graf graf--h3 graf-after--figure">@testing-library/react-hooks</h3><ul class="postList"><li name="ca92" id="ca92" class="graf graf--li graf-after--h3">React hooksun ayrıca kendisine has hooks test libraryside bulunmaktadır.</li><li name="aa5e" id="aa5e" class="graf graf--li graf-after--li">Basit olarak ilk testte kullanımını görebilirsiniz.</li><li name="bc17" id="bc17" class="graf graf--li graf-after--li">Hooksa değer vermek içinse ikinci argument olarak hooksa göndereceğimiz degerleri verebiliriz. (Örnekteki 2. ve 3. testte olduğu gibi.)</li></ul><figure name="5d30" id="5d30" class="graf graf--figure graf--iframe graf-after--li"><script src="https://gist.github.com/mucahidyazar/51705b15fde4b4f198eb410b9b376323.js"></script></figure><ul class="postList"><li name="333a" id="333a" class="graf graf--li graf-after--figure">Veya rerenderi kullanarak yeni değerler ekleyebilir ve sonrasın da yeni değerlere göre test edebiliriz aşağıda ki gibi.</li></ul><figure name="d335" id="d335" class="graf graf--figure graf--iframe graf-after--li"><script src="https://gist.github.com/mucahidyazar/49c651d9f699f8aa5719ab3d7fc68e51.js"></script></figure><h3 name="fb28" id="fb28" class="graf graf--h3 graf-after--figure">.toMatchSnapshot - Snapshot Test</h3><ul class="postList"><li name="59c9" id="59c9" class="graf graf--li graf-after--h3">Daha önce inline snapshot testleri yapmıştık. Şimdi ise outline snapshot testi yapacağız.</li><li name="67a9" id="67a9" class="graf graf--li graf-after--li">Snapshot testlerini yapabilmek için screen ile snapshot test yapacağımız elementimizi ilk önce seçiyoruz, daha sonra expecte seçtiğimiz bu elementi veriyoruz, ve sonra da .toMatchSnapShot() ile snapshotumızı oluşturuyoruz.</li><li name="8335" id="8335" class="graf graf--li graf-after--li">Oluşturduğumuz snapshotlar yaptığınız zaman göreceğiniz üzere __snaapshot__ şeklinde farklı bir klasörde dosyaAdi.spec/test.js.snap şeklinde oluşacakdır. Aşağıda ki resimde ki gibi.</li></ul><figure name="6f62" id="6f62" class="graf graf--figure graf-after--li"><img class="graf-image" data-image-id="1*1Qb2jC_Afro3X4Tpw4TW7w.png" data-width="259" data-height="244" src="https://cdn-images-1.medium.com/max/800/1*1Qb2jC_Afro3X4Tpw4TW7w.png"></figure><ul class="postList"><li name="4de1" id="4de1" class="graf graf--li graf-after--figure">Daha önce Coounter.js diye bir componentımız vardı aşağıda ki gibi. Ben buna birde en dışına data-testid attribute’si olarak counter-container ekledim. Ve ben bunu seçerek Counter componentinin snapshotunu alıyorum.</li></ul><h3 name="01d0" id="01d0" class="graf graf--h3 graf-after--li"><strong class="markup--strong markup--h3-strong">Counter.js</strong></h3><figure name="18e2" id="18e2" class="graf graf--figure graf--iframe graf-after--h3"><script src="https://gist.github.com/mucahidyazar/c578c65d67f7d55560ab817ecb9698ff.js"></script></figure><ul class="postList"><li name="db8e" id="db8e" class="graf graf--li graf-after--figure">Aşağıya yukarıda ki componentin test ve snapshot dosyalarını bırakıyorum.</li></ul><h3 name="b30c" id="b30c" class="graf graf--h3 graf-after--li">Counter.spec.js</h3><figure name="ccb8" id="ccb8" class="graf graf--figure graf--iframe graf-after--h3"><script src="https://gist.github.com/mucahidyazar/7e11028b222944c37797965a64525395.js"></script></figure><h3 name="51c8" id="51c8" class="graf graf--h3 graf-after--figure">Counter.spec.js.snap</h3><figure name="9a73" id="9a73" class="graf graf--figure graf--iframe graf-after--h3"><script src="https://gist.github.com/mucahidyazar/deae744e68d91aacb968bdb5f31340f6.js"></script></figure><ul class="postList"><li name="6229" id="6229" class="graf graf--li graf-after--figure">Snap dosyasını oluşturduktan sonra snap dosyasında ki html veya test edilen component daki html değişirse eğer bir sonraki testte snapshot fail olur.</li><li name="46c2" id="46c2" class="graf graf--li graf-after--li">Snapshotu güncelleyerek yukarıda ki hatayı giderebilir ve yeni snapshot çıktısı alabiliriz, güncellemek için test konsolu açıkken <strong class="markup--strong markup--li-strong">u</strong> ya basınız. Hatayı gidermek için bir diğer yol ise yapılan değişiklikleri geri almak veya düzeltmektir.</li></ul><h3 name="9f94" id="9f94" class="graf graf--h3 graf-after--li">waitForElement(fn) - Asenkron işlemler</h3><ul class="postList"><li name="d24e" id="d24e" class="graf graf--li graf-after--h3">Jest ve react-testing-library ile ile testlerimizde async işlemlerimizi <strong class="markup--strong markup--li-strong">waitForElement</strong> metoduyla gerçekleştiririz.</li><li name="4cb8" id="4cb8" class="graf graf--li graf-after--li">waitForElement içine bir fonksiyon alır ve bu fonksiyon içinde beklemesini istediğimiz elementleri yazarız. Aşağıda ki mod alandaki gibi.</li><li name="5787" id="5787" class="graf graf--li graf-after--li"><strong class="markup--strong markup--li-strong">waitForElement</strong> getByTestId ile movie-title’ı arar ve bulduktan sonra aşağıda ki expecte geçer ve onu yapmaya çalışır.</li><li name="28f0" id="28f0" class="graf graf--li graf-after--li">Ve önemli olan bir diğer nokta ise async işlem yapacaksak testin functionunu async olarak başlatmalıyız aşagidaki gibi.</li></ul><figure name="488e" id="488e" class="graf graf--figure graf--iframe graf-after--li"><script src="https://gist.github.com/mucahidyazar/c1e08f32a61557e0cb9c12144e4560b0.js"></script></figure><ul class="postList"><li name="a47c" id="a47c" class="graf graf--li graf-after--figure">Aşağıda da MovieList.js component testini göreceğiz.</li></ul><figure name="ec5b" id="ec5b" class="graf graf--figure graf--iframe graf-after--li graf--trailing"><script src="https://gist.github.com/mucahidyazar/f9a87d1fc89d0d47c9097408f65ada8a.js"></script></figure></div></div></section>
</section>
<footer><p>By <a href="https://medium.com/@mucahidyazar" class="p-author h-card">Mucahid Yazar</a> on <a href="https://medium.com/p/882aa7a04d49"><time class="dt-published" datetime="2021-03-12T07:02:26.205Z">March 12, 2021</time></a>.</p><p><a href="https://medium.com/@mucahidyazar/testing-react-apps-with-jest-and-react-testing-library-882aa7a04d49" class="p-canonical">Canonical link</a></p><p>Exported from <a href="https://medium.com">Medium</a> on November 24, 2022.</p></footer></article></body></html>