<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Testing Javascript Apps (with Jest)</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle],
      section[data-field=description] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">Testing Javascript Apps (with Jest)</h1>
</header>
<section data-field="subtitle" class="p-summary">
Bu yazımda react uygulamalarının testleri ile alakalı konulara değineceğim.
</section>
<section data-field="body" class="e-content">
<section name="5f2b" class="section section--body section--first section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="f0e5" id="f0e5" class="graf graf--h3 graf--leading graf--title">Testing Javascript Apps (with Jest)</h3><p name="e6b6" id="e6b6" class="graf graf--p graf-after--h3">Bu yazımda react uygulamalarının testleri ile alakalı konulara değineceğim.</p><p name="c91e" id="c91e" class="graf graf--p graf-after--p">Peki niye testlere ihtiyaç duyarız? Neden test yapmalıyız?</p><p name="1b45" id="1b45" class="graf graf--p graf-after--p">Cevabı aslında hepinizin de tahmin edebileceği gibi testler bizim uygulamamızın çalıştığını onaylayan sorgulamalardır diyebiliriz.</p><h3 name="ba11" id="ba11" class="graf graf--h3 graf-after--p">Test Türleri</h3><p name="d1d3" id="d1d3" class="graf graf--p graf-after--h3">Aşağıda test türleri ve bu testleri hangi kütüphaneleri kullanarak yapabileceğimiz ile ilgili fikir veren bir resim bırakıyorum. Burada olmayan farklı mühendislik yöntemleri kullanılarak oluşturulmuş test türleri de var tabi. Fakat günümüzde frontend uygulamaların da kullanılan genel test türleri bunlardır.</p><figure name="0eeb" id="0eeb" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*lwnNiF0Tj6HRXXyiR6bivQ.jpeg" data-width="638" data-height="479" data-is-featured="true" src="https://cdn-images-1.medium.com/max/800/1*lwnNiF0Tj6HRXXyiR6bivQ.jpeg"></figure><blockquote name="c766" id="c766" class="graf graf--blockquote graf-after--figure"><strong class="markup--strong markup--blockquote-strong"><em class="markup--em markup--blockquote-em">Unit Tests</em></strong></blockquote><ul class="postList"><li name="fb09" id="fb09" class="graf graf--li graf-after--blockquote">Unit testler tek bir şeyi test ederler. Aşağıda, örnekte ki gibi sonuçları alıp kullandığımız testler unit testlerdir.</li></ul><figure name="6696" id="6696" class="graf graf--figure graf--iframe graf-after--li"><script src="https://gist.github.com/mucahidyazar/cc4ffd28e7641d2192d85d181b7d737e.js"></script></figure><blockquote name="62de" id="62de" class="graf graf--blockquote graf-after--figure"><strong class="markup--strong markup--blockquote-strong"><em class="markup--em markup--blockquote-em">Integration Tests</em></strong></blockquote><ul class="postList"><li name="56b0" id="56b0" class="graf graf--li graf-after--blockquote">Integration testler ise 2 fonksiyonun işleminin aynı anda calışması gereken durumlarda yapılan testlerdir.</li></ul><figure name="7a3b" id="7a3b" class="graf graf--figure graf--iframe graf-after--li"><script src="https://gist.github.com/mucahidyazar/7ad77721edd6aeb7e88eda3651e6160e.js"></script></figure><blockquote name="1354" id="1354" class="graf graf--blockquote graf-after--figure"><strong class="markup--strong markup--blockquote-strong"><em class="markup--em markup--blockquote-em">End to End (e2e) Tests</em></strong></blockquote><ul class="postList"><li name="39cf" id="39cf" class="graf graf--li graf-after--blockquote">End to end testlerde ise test yapılacak siteyi açıp, kullanıcının siteyi görüp kullandığı gibi testleri yazabiliriz. Aşağıda bunu yaptığımız bir cypress testi görüyoruz. Cypress bu alanda kullanılan popüler kütüphanelerden birisidir.</li></ul><figure name="87e9" id="87e9" class="graf graf--figure graf-after--li"><img class="graf-image" data-image-id="1*hhTR9fysV9ZyKR703-nYyQ.png" data-width="567" data-height="398" src="https://cdn-images-1.medium.com/max/800/1*hhTR9fysV9ZyKR703-nYyQ.png"></figure><p name="b21f" id="b21f" class="graf graf--p graf-after--figure"><strong class="markup--strong markup--p-strong">NOT</strong>: Testlerimiz kullanıcının yapacağı işlemleri test etmelidir. Gereksiz yere, işe yaramayacak kısımlar için test yazmak doğru değildir. Örnek olarak, sitemizin footer alanında yazan, “Copyright” yazan elementi seçip, textContent’inin “Copyright”’a eşit olduğunu test etmek mantıksızdır.</p><h3 name="91ca" id="91ca" class="graf graf--h3 graf-after--p">Bazı Terimler</h3><ul class="postList"><li name="b5a6" id="b5a6" class="graf graf--li graf-after--h3"><strong class="markup--strong markup--li-strong">Methods</strong>: expect, toBe, not, gibi testlerimizin sonuçlarını doğrulamamıza izin veren javascript fonksiyonlarıdır. Matcher diye de çağrılırlar.</li><li name="7cd6" id="7cd6" class="graf graf--li graf-after--li"><strong class="markup--strong markup--li-strong">Mocking</strong>: Fake, taklit eden yapılardır. Örneğin mock bir function veya request oluşturarak bunların kaç kere çağrıldığını, ne ile kullanıldığını gibi varyasyonlarla test edebiliyoruz.</li><li name="43d4" id="43d4" class="graf graf--li graf-after--li"><strong class="markup--strong markup--li-strong">Lifecycle</strong>: Javascript framwork ve librarylerinde olduğu gibi testlerimizde de kullanabildiğimiz, her testten önce, sonra, tüm testlerden önce, sonra gibi işlevsellikler sunan test yapılarıdır. Bunlar kısaca:</li></ul><blockquote name="b7dd" id="b7dd" class="graf graf--blockquote graf-after--li"><strong class="markup--strong markup--blockquote-strong"><em class="markup--em markup--blockquote-em">Lifecycle Methods</em></strong></blockquote><p name="5bb6" id="5bb6" class="graf graf--p graf-after--blockquote"><strong class="markup--strong markup--p-strong">beforeEach</strong>: Her test işleminden önce</p><p name="4dbf" id="4dbf" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">afterEach</strong>: Her test işleminden sonra</p><p name="b5ca" id="b5ca" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">beforeAll</strong>: Tüm test işlemlerinden önce</p><p name="8c93" id="8c93" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">afterAll</strong>: Tüm test işlemlerinden sonra</p><h3 name="bff1" id="bff1" class="graf graf--h3 graf-after--p">Jest</h3><ul class="postList"><li name="e68f" id="e68f" class="graf graf--li graf-after--h3">İlk başta React uygulamalarını test etmek için ortaya çıksada, daha sonraları Javascript uygulamalarını test edebildiğimiz bir yapıya dönüşen test kütüphanesidir.</li><li name="8e87" id="8e87" class="graf graf--li graf-after--li">Hiçbir ayar gerekmeksizin testlerimizi yapabiliriz ve ayarları oldukça basit bir yapıdadır.</li><li name="3bb1" id="3bb1" class="graf graf--li graf-after--li">Terminalden testlerimizi takip edebileceğimiz güzel bir yapısı vardır.</li><li name="755c" id="755c" class="graf graf--li graf-after--li">Güzel bir documentationu vardır.</li></ul><h3 name="7cad" id="7cad" class="graf graf--h3 graf-after--li">Kurulum</h3><ul class="postList"><li name="c4ee" id="c4ee" class="graf graf--li graf-after--h3">Aşağıdaki kod ile jest’i install ediyoruz.</li></ul><blockquote name="539c" id="539c" class="graf graf--blockquote graf-after--li"><strong class="markup--strong markup--blockquote-strong">npm install — save-dev jest</strong></blockquote><ul class="postList"><li name="967a" id="967a" class="graf graf--li graf-after--blockquote">Daha sorna package.json dosyamıza aşağıda ki script’i ekliyoruz.</li></ul><blockquote name="daf2" id="daf2" class="graf graf--blockquote graf--startsWithDoubleQuote graf-after--li"><strong class="markup--strong markup--blockquote-strong">“test”: “jest”</strong></blockquote><ul class="postList"><li name="e4a4" id="e4a4" class="graf graf--li graf-after--blockquote">Ve artık aşağıda ki kod ile testimizi çalıştırabiliriz. Bu kod çalıştığında root dizininde bulunan tüm .spec.js veya .test.js dosyalarını bulur ve çalıştırır.</li></ul><blockquote name="51c0" id="51c0" class="graf graf--blockquote graf-after--li"><strong class="markup--strong markup--blockquote-strong">npm run test</strong></blockquote><h3 name="39a5" id="39a5" class="graf graf--h3 graf-after--blockquote">Test Dosya Yapısı</h3><p name="f0a1" id="f0a1" class="graf graf--p graf-after--h3"><strong class="markup--strong markup--p-strong">describe</strong>: Testlerimizi içinde toplayarak gruplandırdığımız methoddur. İlk argumenti, gruplandırılan testlerin tanımıdır, ikinci argumentde testlerimizin olduğu ve çalıştığı fonksiyondur. Aşağıda örnek bir describe yapısı bırakıyorum.</p><figure name="502e" id="502e" class="graf graf--figure graf--iframe graf-after--p"><script src="https://gist.github.com/mucahidyazar/f8358ba3619d37aa5d23d60a6648530d.js"></script></figure><p name="1034" id="1034" class="graf graf--p graf-after--figure"><strong class="markup--strong markup--p-strong">it / test</strong>: Her bir testimizi bu method içinde tanımladığımız methoddur. it ve test her ikisi de aynıdır. İkisinden birisini kullanabilirsiniz. Örnek olarak yukarıdaki kodlara bakabilirsiniz.</p><ul class="postList"><li name="b75c" id="b75c" class="graf graf--li graf-after--p"><strong class="markup--strong markup--li-strong">.skip</strong>: Kullanıldığı testi skip eder. Yani test etmez. Bazen mesela tüm testleri yapsın fakat 1 tane testi yapmasın istediğimiz durumlarda testi kısaca bu kodla pasif hale geçirebiliriz.</li></ul><figure name="c56c" id="c56c" class="graf graf--figure graf--iframe graf-after--li"><script src="https://gist.github.com/mucahidyazar/c4f1f423a85e56a696eff8daea28f5f7.js"></script></figure><ul class="postList"><li name="1f0d" id="1f0d" class="graf graf--li graf-after--figure"><strong class="markup--strong markup--li-strong">.only</strong>: Bunu kullandığımız da ise tüm testleri yoksayar ve test açlıştığında sadece .only olan testi yapar.</li></ul><figure name="0ada" id="0ada" class="graf graf--figure graf--iframe graf-after--li"><script src="https://gist.github.com/mucahidyazar/0a647afc76f3700209a7657a3824f602.js"></script></figure><h3 name="cdee" id="cdee" class="graf graf--h3 graf-after--figure">METHODS (Methods for tests with Jest)</h3><ul class="postList"><li name="ebb2" id="ebb2" class="graf graf--li graf-after--h3">Matcherları en iyi öğrenebileceğiniz yer jestin kendi documentation’udur.</li></ul><blockquote name="120e" id="120e" class="graf graf--blockquote graf-after--li"><code class="markup--code markup--blockquote-code"><a href="https://jestjs.io/docs/en/expect.html#expectvalue" data-href="https://jestjs.io/docs/en/expect.html#expectvalue" class="markup--anchor markup--blockquote-anchor" rel="noopener" target="_blank"><strong class="markup--strong markup--blockquote-strong"><em class="markup--em markup--blockquote-em">expect(value)</em></strong></a></code></blockquote><ul class="postList"><li name="b63f" id="b63f" class="graf graf--li graf-after--blockquote">İçine argument olarak verdiğimiz değerin kontrolünü yapmamızı sağlar.</li></ul><blockquote name="936c" id="936c" class="graf graf--blockquote graf-after--li"><code class="markup--code markup--blockquote-code"><a href="https://jestjs.io/docs/en/expect.html#tobevalue" data-href="https://jestjs.io/docs/en/expect.html#tobevalue" class="markup--anchor markup--blockquote-anchor" rel="noopener" target="_blank"><strong class="markup--strong markup--blockquote-strong"><em class="markup--em markup--blockquote-em">.toBe(value)</em></strong></a></code></blockquote><ul class="postList"><li name="259c" id="259c" class="graf graf--li graf-after--blockquote">Açık ara en çok testlerde kullanılan matcherdır.</li><li name="0237" id="0237" class="graf graf--li graf-after--li">Javascript’teki primitive(string, number, boolean) değerlerin kontrol etmemizi sağlar.</li><li name="5e89" id="5e89" class="graf graf--li graf-after--li">Kısaca bir primitive değerin ne olduğunu sorgulamamızı sağlar.</li></ul><figure name="7617" id="7617" class="graf graf--figure graf--iframe graf-after--li"><script src="https://gist.github.com/mucahidyazar/cc4ffd28e7641d2192d85d181b7d737e.js"></script><figcaption class="imageCaption">Yukarıda ki iki matcher’ı burada ki örnek ile açıklamak istiyorum. expect ile total değişkenini almışız ve diyoruz ki expect yani ümit et, yani total’i kontrol et, daha sonra toBe ile olmalı diyoruz. Peki ne olmalı? toBe içine verdiğimiz argument olmalı.</figcaption></figure><blockquote name="31cd" id="31cd" class="graf graf--blockquote graf-after--figure"><code class="markup--code markup--blockquote-code"><a href="https://jestjs.io/docs/en/expect.html#toequalvalue" data-href="https://jestjs.io/docs/en/expect.html#toequalvalue" class="markup--anchor markup--blockquote-anchor" rel="noopener" target="_blank"><strong class="markup--strong markup--blockquote-strong"><em class="markup--em markup--blockquote-em">.toEqual(value)</em></strong></a></code></blockquote><ul class="postList"><li name="fbbd" id="fbbd" class="graf graf--li graf-after--blockquote">Objelerin ve arraylerin referans olarak değilde içerik olarak aynı olup olmadığını sorgular. Yani bir car birde television adında 2 değişken objemiz olsun. Bunların marka ve ücretleri olsun. Eğer ikisininde markası ve ücreti aynıysa bu 2 obje birbirinin aynısı olacağı için toEqual testten geçer.</li></ul><blockquote name="0410" id="0410" class="graf graf--blockquote graf-after--li"><code class="markup--code markup--blockquote-code u-paddingRight0 u-marginRight0"><a href="https://jestjs.io/docs/en/expect.html#tobetruthy" data-href="https://jestjs.io/docs/en/expect.html#tobetruthy" class="markup--anchor markup--blockquote-anchor" rel="noopener" target="_blank"><strong class="markup--strong markup--blockquote-strong"><em class="markup--em markup--blockquote-em">.toBeTruthy()</em></strong></a><strong class="markup--strong markup--blockquote-strong"><em class="markup--em markup--blockquote-em"> / </em></strong><a href="https://jestjs.io/docs/en/expect.html#tobefalsy" data-href="https://jestjs.io/docs/en/expect.html#tobefalsy" class="markup--anchor markup--blockquote-anchor" rel="noopener" target="_blank"><strong class="markup--strong markup--blockquote-strong"><em class="markup--em markup--blockquote-em">.toBeFalsy()</em></strong></a></code></blockquote><ul class="postList"><li name="571c" id="571c" class="graf graf--li graf-after--blockquote">Expect edilen değerin true veya false olduğunu kontrol ederiz.</li></ul><figure name="70cb" id="70cb" class="graf graf--figure graf-after--li"><img class="graf-image" data-image-id="1*VTry42wbRJmW8VoLc2BvZA.png" data-width="366" data-height="147" src="https://cdn-images-1.medium.com/max/800/1*VTry42wbRJmW8VoLc2BvZA.png"></figure><blockquote name="73cd" id="73cd" class="graf graf--blockquote graf-after--figure"><code class="markup--code markup--blockquote-code"><a href="https://jestjs.io/docs/en/expect.html#not" data-href="https://jestjs.io/docs/en/expect.html#not" class="markup--anchor markup--blockquote-anchor" rel="noopener" target="_blank"><strong class="markup--strong markup--blockquote-strong"><em class="markup--em markup--blockquote-em">.not</em></strong></a></code></blockquote><ul class="postList"><li name="2e10" id="2e10" class="graf graf--li graf-after--blockquote">Tüm matcherları olumsuz olarak test eder veya tersi şeklinde test eder. not.toBe(9) 9 polmamalı gibi.</li></ul><blockquote name="bd21" id="bd21" class="graf graf--blockquote graf-after--li"><code class="markup--code markup--blockquote-code"><a href="https://jestjs.io/docs/en/expect.html#tocontainitem" data-href="https://jestjs.io/docs/en/expect.html#tocontainitem" class="markup--anchor markup--blockquote-anchor" rel="noopener" target="_blank"><strong class="markup--strong markup--blockquote-strong"><em class="markup--em markup--blockquote-em">.toContain(item)</em></strong></a></code></blockquote><ul class="postList"><li name="c301" id="c301" class="graf graf--li graf-after--blockquote">Arrayin içindeki elemanların bir değeri içerip içermediğini kontrol eder.</li></ul><figure name="dfa7" id="dfa7" class="graf graf--figure graf--iframe graf-after--li"><script src="https://gist.github.com/mucahidyazar/c0e696927d84c4e98ec99a4937d35e2a.js"></script></figure><blockquote name="7eb4" id="7eb4" class="graf graf--blockquote graf-after--figure"><code class="markup--code markup--blockquote-code"><a href="https://jestjs.io/docs/en/expect.html#tothrowerror" data-href="https://jestjs.io/docs/en/expect.html#tothrowerror" class="markup--anchor markup--blockquote-anchor" rel="noopener" target="_blank"><strong class="markup--strong markup--blockquote-strong"><em class="markup--em markup--blockquote-em">.toThrow(error?)</em></strong></a></code></blockquote><ul class="postList"><li name="816c" id="816c" class="graf graf--li graf-after--blockquote">Bir fonksiyonun bir şey throw edip etmediğini kontrol eder.</li></ul><figure name="6228" id="6228" class="graf graf--figure graf--iframe graf-after--li"><script src="https://gist.github.com/mucahidyazar/3f9887060a16e92c32482568bc93c691.js"></script></figure><blockquote name="4801" id="4801" class="graf graf--blockquote graf-after--figure"><code class="markup--code markup--blockquote-code"><a href="https://jestjs.io/docs/en/expect.html#tobegreaterthannumber--bigint" data-href="https://jestjs.io/docs/en/expect.html#tobegreaterthannumber--bigint" class="markup--anchor markup--blockquote-anchor" rel="noopener" target="_blank"><strong class="markup--strong markup--blockquote-strong"><em class="markup--em markup--blockquote-em">.toBeGreaterThan(number | bigint)</em></strong></a></code></blockquote><ul class="postList"><li name="92e9" id="92e9" class="graf graf--li graf-after--blockquote">Expect içine aldığı değerin, toBeGeaterThan içine aldığı number veya bigInt değerinden büyük olduğunu denetler.</li></ul><blockquote name="778f" id="778f" class="graf graf--blockquote graf-after--li"><code class="markup--code markup--blockquote-code"><a href="https://jestjs.io/docs/en/expect.html#tobenull" data-href="https://jestjs.io/docs/en/expect.html#tobenull" class="markup--anchor markup--blockquote-anchor" rel="noopener" target="_blank"><strong class="markup--strong markup--blockquote-strong"><em class="markup--em markup--blockquote-em">.toBeNull()</em></strong></a></code></blockquote><ul class="postList"><li name="ca93" id="ca93" class="graf graf--li graf-after--blockquote">Expect edilen değer null ise test geçer.</li></ul><blockquote name="c9cf" id="c9cf" class="graf graf--blockquote graf-after--li"><code class="markup--code markup--blockquote-code"><a href="https://jestjs.io/docs/en/expect.html#tobeundefined" data-href="https://jestjs.io/docs/en/expect.html#tobeundefined" class="markup--anchor markup--blockquote-anchor" rel="noopener" target="_blank"><strong class="markup--strong markup--blockquote-strong"><em class="markup--em markup--blockquote-em">.toBeUndefined()</em></strong></a></code></blockquote><ul class="postList"><li name="46f7" id="46f7" class="graf graf--li graf-after--blockquote">Expect edilen değer undefined ise test geçer.</li></ul><h3 name="a8f9" id="a8f9" class="graf graf--h3 graf-after--li">JEST CLI</h3><p name="e2c8" id="e2c8" class="graf graf--p graf-after--h3"><a href="https://jestjs.io/docs/en/cli" data-href="https://jestjs.io/docs/en/cli" class="markup--anchor markup--p-anchor" rel="nofollow noopener noopener" target="_blank">https://jestjs.io/docs/en/cli</a></p><ul class="postList"><li name="6b15" id="6b15" class="graf graf--li graf-after--p">Daha önce kurulum aşamasında yapacağımız şekilde, en basit haliyle jest cli’ı çalıştırabiliriz. Fakat farklı cli komutlarıda bulunmaktadır. Burada onların bazı önemli olanlarına değineceğim.</li></ul><blockquote name="361e" id="361e" class="graf graf--blockquote graf-after--li"><strong class="markup--strong markup--blockquote-strong">— watch</strong></blockquote><ul class="postList"><li name="48d5" id="48d5" class="graf graf--li graf-after--blockquote">normalde yukarıda ki gibi bir kurulumda test dosyalarınızda değişiklik yaptığınız zaman yapılan değişikliği görüp jest tekrardan testi çalıştırmaz. Bunu yapabilmemiz için yukarıdaki — watch kodunu scriptteki jest’ten sonrasına aşağıdaki gibi eklememiz gerekmektedir.</li></ul><p name="2470" id="2470" class="graf graf--p graf--startsWithDoubleQuote graf-after--li"><strong class="markup--strong markup--p-strong">“test”: “jest — watch”</strong></p><blockquote name="d2b5" id="d2b5" class="graf graf--blockquote graf-after--p"><strong class="markup--strong markup--blockquote-strong">— coverage</strong></blockquote><ul class="postList"><li name="c002" id="c002" class="graf graf--li graf-after--blockquote">Testlerimizin kapsama oranlarını görebileceğimiz koddur. Örnek olarak elimizde bir Ödeme utilty dosyası veya komponenti var. Bu dosyaya yaptığımız testin yüzdesel olarak ne kadarını kapsadığını bize gösteren jestin yardımcı özelliğidir diyebiliriz. Terminalde biz bu coverage oranlarını görebilir ve takip edebiliriz.</li></ul><figure name="6c3b" id="6c3b" class="graf graf--figure graf-after--li"><img class="graf-image" data-image-id="1*9nFYYbLEmxcuMidK49AeZA.png" data-width="378" data-height="337" src="https://cdn-images-1.medium.com/max/800/1*9nFYYbLEmxcuMidK49AeZA.png"></figure><h3 name="5177" id="5177" class="graf graf--h3 graf-after--figure">jest.fn() — MOCK FUNCTIONS</h3><ul class="postList"><li name="e405" id="e405" class="graf graf--li graf-after--h3">Taklit etme yeteneğine sahip fonksiyonlardır diyebiliriz. Ne işimize yarar derseniz, testlerde fonksiyonların kaç kere çağrıldığını, hangi argumentler kullanılarak çağrıldığını test etmemize yarar.</li></ul><blockquote name="583c" id="583c" class="graf graf--blockquote graf-after--li"><code class="markup--code markup--blockquote-code"><a href="https://jestjs.io/docs/en/expect.html#tohavebeencalledtimesnumber" data-href="https://jestjs.io/docs/en/expect.html#tohavebeencalledtimesnumber" class="markup--anchor markup--blockquote-anchor" rel="noopener" target="_blank"><strong class="markup--strong markup--blockquote-strong"><em class="markup--em markup--blockquote-em">.toHaveBeenCalledTimes(number)</em></strong></a></code></blockquote><ul class="postList"><li name="0734" id="0734" class="graf graf--li graf-after--blockquote">Bir fonksiyonun kaç kere çağrıldığını test etmemize yarar. Aşağıda expect içine aldığımız add fonksiyonunun, expecte gelene kadar 1 kere çağrıldığını test ediyoruz.</li></ul><blockquote name="fc17" id="fc17" class="graf graf--blockquote graf-after--li"><code class="markup--code markup--blockquote-code"><a href="https://jestjs.io/docs/en/expect.html#tohavebeencalledwitharg1-arg2-" data-href="https://jestjs.io/docs/en/expect.html#tohavebeencalledwitharg1-arg2-" class="markup--anchor markup--blockquote-anchor" rel="noopener" target="_blank"><strong class="markup--strong markup--blockquote-strong"><em class="markup--em markup--blockquote-em">.toHaveBeenCalledWith(arg1, arg2, ...)</em></strong></a></code></blockquote><ul class="postList"><li name="8720" id="8720" class="graf graf--li graf-after--blockquote">Bir fonksiyonun hangi argumentler ile çağrıldığını test etmemizi sağlar. Aşağıda expect ile add’i 1 ve 8 argumentleriyle çağırıp, daha sonra .toBe(9) olmalı demişiz. Bu sayede add bir kere çağrıldı. Daha sonra bunu kontrol etmek istersek, expect’e “expect(add)” bu şekilde add’i argument olarak verip daha sonra add ile daha önce kullandığımız argumentleri(1,8) bu sefer toHaveBeenCalledWith ile kullanarak test edeceğiz.</li></ul><figure name="1ae0" id="1ae0" class="graf graf--figure graf--iframe graf-after--li"><script src="https://gist.github.com/mucahidyazar/4a05babb8851ad8e0936b6c7b691d66e.js"></script></figure><h3 name="ff59" id="ff59" class="graf graf--h3 graf-after--figure">jest.mock() — MOCKs</h3><ul class="postList"><li name="168e" id="168e" class="graf graf--li graf-after--h3">Burada da taklit eden mock yapılar kuruyoruz. Varsayalım ./add.js dosyasından add adında bir ekleme fonksiyonunu dosyamıza dahil edeceğiz. Fakat bu add.js farklı servislerle bağlantılı olduğu için direkt add.js’i dahil etmek ve testlerle kullanmak mantıklı değil, o zaman jest.mock methodu bize yardıma koşuyor.</li></ul><figure name="9f29" id="9f29" class="graf graf--figure graf--iframe graf-after--li"><script src="https://gist.github.com/mucahidyazar/937f1c19d6444555dba93ba7236cb50a.js"></script><figcaption class="imageCaption">add.js</figcaption></figure><ul class="postList"><li name="335f" id="335f" class="graf graf--li graf-after--figure">İlk önce add metodunu ./add.js yolundan import ediyoruz.</li><li name="8b47" id="8b47" class="graf graf--li graf-after--li">Daha sonra jest.mock ile mock yapımızı oluşturuyoruz. İlk argument olarak import edilen add dosyasının yolunu veriyoruz ki, taklit edeceği adresi bilebilsin. İkinci argument olarakda bir Object return eden bir fonksiyon oluşturuyoruz.</li><li name="df1d" id="df1d" class="graf graf--li graf-after--li">Bu return olan objedeki key, ./add’den import ettiğimiz add gibi, default exportla export edilen bir method gibi değilde, sadece export edilmiş bir değer olarak düşünebilirsiniz.</li><li name="ab07" id="ab07" class="graf graf--li graf-after--li">Bu 2. argumentde dönen add adında bir key oluşturuyoruz çünkü add importunu taklit ve manipüle etmesini istiyoruz. ve karşısına value olarakda bir ject.fn ile mock function oluşturuyoruz. Daha sonrası ise şuana kadar gördüğümüz diğer methodlarla işimizi test etmek oluyor.</li></ul><figure name="11e6" id="11e6" class="graf graf--figure graf--iframe graf-after--li"><script src="https://gist.github.com/mucahidyazar/d0f4883c7a73d48df12399270c581fcf.js"></script></figure><p name="9144" id="9144" class="graf graf--p graf-after--figure graf--trailing">Daha fazla kafanızı karıştırmamak için bu yazımı burada sonlandırıyorum. Bir sonra ki yazımda burada öğrendiklerimizle Jest’i kullanarak ve diğer kısımda öğreneceğimiz react-testing-library’i kullanarak React Component testlerimizi yapacağız. Bir sonra ki yazımda görüşmek üzere.</p></div></div></section>
</section>
<footer><p>By <a href="https://medium.com/@mucahidyazar" class="p-author h-card">Mucahid Yazar</a> on <a href="https://medium.com/p/fb53212cd46a"><time class="dt-published" datetime="2021-03-05T07:02:52.785Z">March 5, 2021</time></a>.</p><p><a href="https://medium.com/@mucahidyazar/testing-javascript-apps-with-jest-fb53212cd46a" class="p-canonical">Canonical link</a></p><p>Exported from <a href="https://medium.com">Medium</a> on November 24, 2022.</p></footer></article></body></html>