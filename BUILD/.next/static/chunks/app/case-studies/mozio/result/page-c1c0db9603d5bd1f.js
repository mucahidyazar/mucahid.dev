(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[839],{91201:function(e,i,l){Promise.resolve().then(l.bind(l,21421))},21421:function(e,i,l){"use strict";l.r(i),l.d(i,{default:function(){return f}});var n=l(41844),t=l(5715),s=l(52013),r=l(20577),o=l(32604);let a=[["Paris",48.856614,2.352222],["Marseille",43.296482,5.36978],["Lyon",45.764043,4.835659],["Toulouse",43.604652,1.444209],["Nice",43.710173,7.261953],["Nantes",47.218371,-1.553621],["Strasbourg",48.573405,7.752111],["Montpellier",43.610769,3.876716],["Bordeaux",44.837789,-.57918],["Lille",50.62925,3.057256],["Rennes",48.117266,-1.677793],["Reims",49.258329,4.031696],["Le Havre",49.49437,.107929],["Saint-\xc9tienne",45.439695,4.387178],["Toulon",43.124228,5.928],["Angers",47.478419,-.563166],["Grenoble",45.188529,5.724524],["Dijon",47.322047,5.04148],["N\xeemes",43.836699,4.360054],["Aix-en-Provence",43.529742,5.447427]];var d=l(39332),c=l(22920),u=l(27060),h=l(74094),p=l(87669),x=l(55784),m=l(70594);let g=async e=>{let{origin:i,destination:l}=e,{data:n}=await m.Z.get("/api/case-studies/mozio/get-distance",{params:{origin:i,destination:l}});return n},b=(0,u.Cl)(),j=[b.accessor("origin",{id:"origin",cell(e){let i=e.row.original.originCoords.join(", ");return(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("p",{children:e.getValue()}),", "!==i&&(0,n.jsxs)("span",{className:"text-xs font-light text-gray-400",children:["(",i,")"]})]})},header:()=>(0,n.jsx)("span",{children:"Origin"})}),b.accessor("destination",{id:"destination",cell(e){let i=e.row.original.destinationCoords.join(", ");return(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("p",{children:e.getValue()}),", "!==i&&(0,n.jsxs)("span",{className:"text-xs font-light text-gray-400",children:["(",i,")"]})," "]})},header:()=>(0,n.jsx)("span",{children:"Destination"})}),b.accessor("distance",{id:"distance",cell:e=>e.getValue().toFixed(2)+"km",header:()=>(0,n.jsx)("span",{children:"Distance"})})];function f(){let e=(0,d.useSearchParams)(),i=e.get("origin"),l=e.getAll("destination"),m=a.find(e=>e[0]===i),b=a.filter(e=>l.includes(e[0])),f=(0,x.useMemo)(()=>{let e=[...b,m];return e.map((i,l)=>{let n=(null==i?void 0:i[0])||"",t=(null==i?void 0:i[1])||"",s=(null==i?void 0:i[2])||"",r=e.filter(Boolean).filter((e,i)=>i!==l).map(e=>{let i=(null==e?void 0:e[0])||"",l=(null==e?void 0:e[1])||"",r=(null==e?void 0:e[2])||"";return{origin:n,originCoords:[t,s],destination:i,destinationCoords:[l,r],distance:0}});return r}).flat()},[m,b]),[v,y]=(0,x.useState)(f),N=(0,h.b7)({data:v,columns:j,getCoreRowModel:(0,u.sC)()});(0,p.h)({queries:v.map(e=>{let{origin:i,destination:l}=e;return{queryKey:[i,l],queryFn:()=>g({origin:i,destination:l}),onSuccess(e){y(n=>{let t=n.map(n=>n.origin===i&&n.destination===l?{...n,distance:e.distance}:n);return t})},onError(e){console.log(e),c.Am.error(e.message)}}})});let w=[{label:"Origin",value:i},{label:"Destinations",value:l.join(", ")},{label:"Date",value:e.get("date")},{label:"Passengers",value:e.get("passengers")}];return(0,n.jsxs)("div",{id:"mozio",children:[(0,n.jsx)("div",{className:"flex flex-col gap-2 mb-4",children:w.map(e=>(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"capitalize font-semibold italic inline-block w-32 underline",children:e.label})," : ",e.value]},e.label))}),(0,n.jsxs)("table",{className:"border border-solid border-white border-opacity-10 mx-auto my-12",children:[(0,n.jsx)("thead",{className:"bg-white bg-opacity-10",children:N.getHeaderGroups().map(e=>(0,n.jsx)("tr",{children:e.headers.map(e=>(0,n.jsx)("th",{className:"py-2 px-4",children:e.isPlaceholder?null:(0,h.ie)(e.column.columnDef.header,e.getContext())},e.id))},e.id))}),(0,n.jsx)("tbody",{children:N.getRowModel().rows.map(e=>{let i=e.getAllCells().map(e=>e.getValue()),l=i.every(Boolean);return(0,n.jsx)("tr",{className:l?"":"bg-red-400 bg-opacity-50",children:e.getVisibleCells().map(e=>(0,n.jsx)("td",{className:"py-2 px-4",children:(0,h.ie)(e.column.columnDef.cell,e.getContext())},e.id))},e.id)})}),(0,n.jsx)("tfoot",{children:N.getFooterGroups().map(e=>(0,n.jsx)("tr",{children:e.headers.map(e=>(0,n.jsx)("th",{children:e.isPlaceholder?null:(0,h.ie)(e.column.columnDef.footer,e.getContext())},e.id))},e.id))})]}),(null==m?void 0:m[1])&&(null==m?void 0:m[2])&&(0,n.jsx)("div",{className:"w-[512px] h-[512px] border border-solid border-white border-opacity-10 mx-auto rounded overflow-hidden",children:(0,n.jsxs)(t.h,{center:[m[1],m[2]],zoom:2,scrollWheelZoom:!1,children:[(0,n.jsx)(s.I,{attribution:'\xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),null==b?void 0:b.map(e=>(0,n.jsx)(r.J,{position:[e[1],e[2]],children:(0,n.jsxs)(o.G,{children:["This is ",e[0]]})},e[0]))]})})]})}}},function(e){e.O(0,[269,304,77,742,17,744],function(){return e(e.s=91201)}),_N_E=e.O()}]);