(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[852],{5784:function(e,t,a){Promise.resolve().then(a.bind(a,35513))},35513:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return g}});var r=a(41844),i=a(55784),n=a(74358),o=a(17e3),s=a(13840),l=a(87536),d=a(74231),c=a(47533),u=a(39332),p=a(70594);let h=async e=>{let{city:t}=e,{data:a}=await p.Z.get("/api/case-studies/mozio/cities-name-lat-lon",{params:{city:t}});return a};function g(){let e=(0,u.useSearchParams)(),t=e.getAll("destination"),[a,p]=(0,i.useState)((null==t?void 0:t.length)?t:[""]),[g,b]=(0,i.useState)(""),x=(0,u.useRouter)(),{data:m}=(0,o.a)(["cities",g],()=>h({city:g})),y=null==m?void 0:m.cities,f=d.Ry({origin:d.Z_().required(),...a.reduce((e,t,a)=>(e["destination".concat(a)]=d.Z_().required(),e),{}),date:d.hT().test("is-future","Date must be in the future",e=>!e||new Date(e)>new Date),passengers:d.Rx().required()}),{handleSubmit:v,register:j,formState:{errors:w},getValues:N,setValue:k}=(0,l.cI)({resolver:(0,c.X)(f),defaultValues:{origin:e.get("origin")||"",date:e.get("date")||"",passengers:e.get("passengers")||"",...t.reduce((e,t,a)=>(e["destination".concat(a)]=t,e),{})}}),C=e=>{let t=Object.keys(e),a=t.map(t=>t.includes("destination")?"destination=".concat(e[t]):"".concat(t,"=").concat(e[t])).join("&").replace(/%2C/g,",");x.push("/case-studies/mozio/result?".concat(a))};return(0,r.jsx)("div",{id:"mozio",children:(0,r.jsxs)("form",{className:"flex flex-col gap-2 w-1/2 mx-auto",onSubmit:v(C),children:[(0,r.jsxs)(n.h,{onChange(e){k("origin",e)},children:[(0,r.jsx)(n.h.Input,{...j("origin"),onChange(e){let t=setTimeout(()=>{b(e.target.value)},1e3);return()=>clearTimeout(t)},displayValue:e=>N().origin||e,className:"p-2 bg-transparent bg-opacity-20 text-gray-300 border border-solid border-white border-opacity-10 rounded placeholder-white placeholder-opacity-20 ".concat((null==w?void 0:w.origin)?"border-red-500 border-opacity-100":""),type:"text",placeholder:"origin"}),(0,r.jsx)(n.h.Options,{children:null==y?void 0:y.map(e=>(0,r.jsx)(n.h.Option,{value:null==e?void 0:e[0],as:i.Fragment,children(t){let{active:a,selected:i}=t;return(0,r.jsxs)("li",{className:"py-2 px-4 bg-opacity-20 ".concat(a?"bg-blue-500 text-white":"bg-white text-black"),children:[i&&(0,r.jsx)(s.Z,{}),null==e?void 0:e[0]]})}},null==e?void 0:e[0]))})]}),(0,r.jsxs)("div",{className:"w-full flex flex-col gap-1",children:[a.map((e,t)=>(0,r.jsxs)(n.h,{onChange(e){k("destination".concat(t),e)},children:[(0,r.jsx)(n.h.Input,{...j("destination".concat(t)),onChange(e){let t=setTimeout(()=>{b(e.target.value)},1e3);return()=>clearTimeout(t)},displayValue(e){var a;return(null===(a=N())||void 0===a?void 0:a["destination".concat(t)])||e},className:"p-2 bg-transparent bg-opacity-20 text-gray-300 border border-solid border-white border-opacity-10 rounded placeholder-white placeholder-opacity-20 ".concat((null==w?void 0:w["destination".concat(t)])?"border-red-500 border-opacity-100":""),type:"text",placeholder:"destination"}),(0,r.jsx)(n.h.Options,{children:null==y?void 0:y.map(e=>(0,r.jsx)(n.h.Option,{value:e[0],as:i.Fragment,children(t){let{active:a,selected:i}=t;return(0,r.jsxs)("li",{className:"py-2 px-4 bg-opacity-20 ".concat(a?"bg-blue-500 text-white":"bg-white text-black"),children:[i&&(0,r.jsx)(s.Z,{}),null==e?void 0:e[0]]})}},null==e?void 0:e[0]))})]},t)),(0,r.jsx)("button",{className:"w-full p-2 rounded bg-purple-500 bg-opacity-10 hover:bg-opacity-20 text-white ml-auto duration-150",onClick:()=>p(e=>[...e,{}]),children:"+"})]}),(0,r.jsxs)("div",{className:"flex flex-col w-full",children:[(0,r.jsx)("input",{className:"p-2 bg-transparent bg-opacity-20 text-gray-300 border border-solid border-white border-opacity-10 rounded placeholder-white placeholder-opacity-20 ".concat((null==w?void 0:w.date)?"border-red-500 border-opacity-100":""),id:"date",type:"date",...j("date")}),w.date&&(0,r.jsx)("span",{className:"text-red-500",children:String(w.date.message)})]}),(0,r.jsxs)("div",{className:"flex flex-col w-full",children:[(0,r.jsx)("input",{className:"p-2 bg-transparent bg-opacity-20 text-gray-300 border border-solid border-white border-opacity-10 rounded placeholder-white placeholder-opacity-20 focus:border-none ".concat((null==w?void 0:w.passengers)?"border-red-500 border-opacity-100":""),id:"passengers",type:"number",placeholder:"passengers",...j("passengers")}),w.passengers&&(0,r.jsx)("span",{className:"text-red-500",children:String(w.passengers.message)})]}),(0,r.jsx)("button",{className:"w-full p-2 rounded bg-purple-500 text-white ml-auto",type:"submit",children:"Search"})]})})}}},function(e){e.O(0,[304,77,722,17,744],function(){return e(e.s=5784)}),_N_E=e.O()}]);